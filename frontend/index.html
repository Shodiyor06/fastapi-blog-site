<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevSpace Blog</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'bounce-gentle': 'bounceGentle 2s infinite',
                        'pulse-slow': 'pulse 3s infinite',
                        'float': 'float 3s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(100px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        bounceGentle: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' }
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-20px)' }
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 20px rgba(139, 92, 246, 0.3)' },
                            '100%': { boxShadow: '0 0 40px rgba(139, 92, 246, 0.6)' }
                        }
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .glass-effect {
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .text-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .bg-gradient-custom {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .bg-mesh {
            background: 
                radial-gradient(circle at 25% 25%, rgba(139, 92, 246, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(59, 130, 246, 0.3) 0%, transparent 50%),
                linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .card-hover {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .card-hover:hover {
            transform: translateY(-12px) scale(1.02);
        }

        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .parallax-scroll {
            transform: translateY(var(--scroll-y, 0));
        }

        .modal-backdrop {
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        .loading-dots::after {
            content: '';
            animation: dots 2s infinite;
        }

        @keyframes dots {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }
    </style>
</head>
<body class="bg-mesh min-h-screen">
    <!-- Floating background elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-20 left-10 w-64 h-64 bg-purple-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-float"></div>
        <div class="absolute top-40 right-10 w-96 h-96 bg-blue-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-float animation-delay-2000"></div>
        <div class="absolute bottom-20 left-1/3 w-80 h-80 bg-pink-400 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-float animation-delay-4000"></div>
    </div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 glass-effect bg-white/10 border-b border-white/20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-code text-2xl text-white animate-pulse-slow"></i>
                    <h1 class="text-xl font-bold text-white">DevSpace</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="themeToggle" class="p-2 rounded-full bg-white/10 hover:bg-white/20 transition-all duration-300">
                        <i class="fas fa-moon text-white"></i>
                    </button>
                    <button id="createPostBtn" class="px-4 py-2 bg-gradient-custom rounded-full text-white font-medium hover:shadow-lg hover:scale-105 transition-all duration-300">
                        <i class="fas fa-plus mr-2"></i>New Post
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="pt-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Hero Section -->
        <header class="text-center py-16 animate-fade-in">
            <h1 class="text-6xl md:text-8xl font-bold text-white mb-6 animate-slide-up">
                <span class="text-gradient">Dev</span>Space
            </h1>
            <p class="text-xl md:text-2xl text-white/80 mb-8 max-w-3xl mx-auto animate-slide-up" style="animation-delay: 0.2s;">
                Discover amazing stories, tutorials, and insights from the developer community
            </p>
            
            <!-- Enhanced Search -->
            <div class="max-w-2xl mx-auto relative animate-slide-up" style="animation-delay: 0.4s;">
                <div class="relative">
                    <input 
                        type="text" 
                        id="searchInput"
                        class="w-full px-6 py-4 pl-14 pr-16 text-lg rounded-2xl glass-effect bg-white/10 border border-white/20 text-white placeholder-white/60 focus:outline-none focus:ring-4 focus:ring-purple-500/50 focus:border-white/40 transition-all duration-300"
                        placeholder="Search posts, authors, topics..."
                    >
                    <i class="fas fa-search absolute left-5 top-1/2 transform -translate-y-1/2 text-white/60"></i>
                    <button id="clearSearch" class="absolute right-5 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white transition-colors duration-300 hidden">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <!-- Search Stats -->
                <div id="searchStats" class="mt-4 text-white/60 text-sm hidden">
                    <i class="fas fa-info-circle mr-1"></i>
                    <span id="searchStatsText"></span>
                </div>
            </div>

            <!-- Filter Tags -->
            <div id="filterTags" class="mt-8 flex flex-wrap justify-center gap-3 animate-fade-in" style="animation-delay: 0.6s;">
                <!-- Tags will be populated by JS -->
            </div>
        </header>

        <!-- Loading State -->
        <div id="loading" class="text-center py-16 text-white">
            <div class="inline-flex items-center space-x-3">
                <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-white"></div>
                <span class="text-xl loading-dots">Loading posts</span>
            </div>
        </div>

        <!-- Posts Grid -->
        <div id="postsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16 hidden"></div>

        <!-- No Results -->
        <div id="noResults" class="text-center py-16 hidden">
            <div class="glass-effect bg-white/10 rounded-3xl p-12 max-w-md mx-auto">
                <i class="fas fa-search text-6xl text-white/40 mb-6"></i>
                <h3 class="text-2xl font-bold text-white mb-4">No posts found</h3>
                <p class="text-white/60">Try adjusting your search terms or browse all posts</p>
                <button id="showAllBtn" class="mt-6 px-6 py-3 bg-gradient-custom rounded-full text-white font-medium hover:shadow-lg transition-all duration-300">
                    Show All Posts
                </button>
            </div>
        </div>
    </div>

    <!-- Post Modal -->
    <div id="postModal" class="fixed inset-0 z-50 hidden">
        <div class="modal-backdrop bg-black/50 absolute inset-0"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="glass-effect bg-white/95 rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative animate-slide-up">
                <div class="sticky top-0 bg-white/90 border-b border-gray-200 p-6 rounded-t-3xl flex justify-between items-center">
                    <button id="backBtn" class="flex items-center space-x-2 px-4 py-2 bg-gradient-custom rounded-full text-white hover:shadow-lg transition-all duration-300">
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                    </button>
                    <div class="flex space-x-2">
                        <button id="editPostBtn" class="p-2 rounded-full bg-blue-100 hover:bg-blue-200 text-blue-600 transition-all duration-300">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button id="deletePostBtn" class="p-2 rounded-full bg-red-100 hover:bg-red-200 text-red-600 transition-all duration-300">
                            <i class="fas fa-trash"></i>
                        </button>
                        <button id="closeModal" class="p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 transition-all duration-300">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <div class="p-8">
                    <div class="mb-6">
                        <h2 id="modalTitle" class="text-4xl font-bold text-gray-800 mb-4"></h2>
                        <div id="modalMeta" class="flex items-center space-x-6 text-gray-500"></div>
                    </div>
                    
                    <div id="modalContent" class="prose prose-lg max-w-none text-gray-700 leading-relaxed"></div>
                    
                    <div class="mt-8 pt-8 border-t border-gray-200">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <button class="flex items-center space-x-2 px-4 py-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-full transition-all duration-300">
                                    <i class="fas fa-heart"></i>
                                    <span>Like</span>
                                </button>
                                <button class="flex items-center space-x-2 px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-full transition-all duration-300">
                                    <i class="fas fa-share"></i>
                                    <span>Share</span>
                                </button>
                            </div>
                            <div class="text-sm text-gray-400">
                                <i class="fas fa-clock mr-1"></i>
                                <span id="readingTime"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create/Edit Post Modal -->
    <div id="postFormModal" class="fixed inset-0 z-50 hidden">
        <div class="modal-backdrop bg-black/50 absolute inset-0"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="glass-effect bg-white/95 rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-slide-up">
                <div class="p-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 id="formModalTitle" class="text-3xl font-bold text-gray-800">Create New Post</h2>
                        <button id="closeFormModal" class="p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 transition-all duration-300">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <form id="postForm" class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                            <input type="text" id="postTitle" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-purple-500/50 focus:border-purple-500 transition-all duration-300">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Author</label>
                            <input type="text" id="postAuthor" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-purple-500/50 focus:border-purple-500 transition-all duration-300">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Content</label>
                            <textarea id="postContent" required rows="8" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-purple-500/50 focus:border-purple-500 transition-all duration-300 resize-none"></textarea>
                            <div class="mt-2 text-sm text-gray-500">
                                <span id="charCount">0</span> characters
                            </div>
                        </div>
                        
                        <div class="flex space-x-4">
                            <button type="submit" class="flex-1 py-3 bg-gradient-custom text-white rounded-xl font-medium hover:shadow-lg hover:scale-105 transition-all duration-300">
                                <i class="fas fa-save mr-2"></i>
                                <span id="submitBtnText">Create Post</span>
                            </button>
                            <button type="button" id="cancelForm" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-300 transition-all duration-300">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="fixed top-20 right-4 z-50 space-y-3"></div>

    <script>
        const API_BASE_URL = 'http://localhost:8000';
        let allPosts = [];
        let currentSearchTerm = '';
        let currentFilter = '';
        let isEditMode = false;
        let editingPostId = null;

        // DOM elements
        const elements = {
            loading: document.getElementById('loading'),
            postsContainer: document.getElementById('postsContainer'),
            noResults: document.getElementById('noResults'),
            searchInput: document.getElementById('searchInput'),
            clearSearch: document.getElementById('clearSearch'),
            modal: document.getElementById('postModal'),
            formModal: document.getElementById('postFormModal'),
            filterTags: document.getElementById('filterTags'),
            searchStats: document.getElementById('searchStats'),
            toastContainer: document.getElementById('toastContainer')
        };

        // Utility functions
        function calculateReadingTime(content) {
            const wordsPerMinute = 200;
            const wordCount = content.split(' ').length;
            const readTime = Math.ceil(wordCount / wordsPerMinute);
            return `${readTime} min read`;
        }

        function getRandomLikes() {
            return Math.floor(Math.random() * 200) + 20;
        }

        function getRandomDate() {
            const start = new Date(2024, 0, 1);
            const end = new Date();
            const randomDate = new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));
            return randomDate.toISOString().split('T')[0];
        }

        function getCategoryFromContent(title, content) {
            const categories = {
                'tutorial': ['tutorial', 'guide', 'how to', 'getting started'],
                'backend': ['api', 'fastapi', 'server', 'backend', 'database'],
                'frontend': ['html', 'css', 'javascript', 'react', 'frontend'],
                'travel': ['travel', 'journey', 'visited', 'trip'],
                'lifestyle': ['cooking', 'recipe', 'lifestyle'],
                'books': ['book', 'review', 'read'],
                'tech': ['tech', 'ai', 'technology', 'openai'],
                'sports': ['sport', 'game', 'won'],
                'motivation': ['motivation', 'success', 'consistent']
            };

            const text = (title + ' ' + content).toLowerCase();
            
            for (const [category, keywords] of Object.entries(categories)) {
                if (keywords.some(keyword => text.includes(keyword))) {
                    return category.charAt(0).toUpperCase() + category.slice(1);
                }
            }
            
            return 'General';
        }
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `glass-effect bg-white/90 border border-gray-300 rounded-xl p-4 shadow-lg flex items-center space-x-4 max-w-sm animate-slide-up`;
            toast.innerHTML = `
                <div class="flex-shrink-0">
                    <i class="fas ${type === 'success' ? 'fa-check-circle text-green-500' : type === 'error' ? 'fa-exclamation-circle text-red-500' : 'fa-info-circle text-blue-500'} text-2xl"></i>
                </div>
                <div class="text-gray-800">${message}</div>
                <button class="ml-auto text-gray-400 hover:text-gray-600 transition-colors duration-300">
                    <i class="fas fa-times"></i>
                </button>
            `;
            elements.toastContainer.appendChild(toast);
            toast.querySelector('button').onclick = () => toast.remove();
            setTimeout(() => {

                toast.remove();
            }, 5000);
        }
        function updateCharCount() {
            const charCount = document.getElementById('postContent').value.length;
            document.getElementById('charCount').innerText = charCount;
        }
        function resetForm() {
            document.getElementById('postForm').reset();
            updateCharCount();
            isEditMode = false;
            editingPostId = null;
            document.getElementById('formModalTitle').innerText = 'Create New Post';
            document.getElementById('submitBtnText').innerText = 'Create Post';
        }
        function toggleModal(modal, show) {
            if (show) {
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            } else {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }
        }
        function renderPosts(posts) {
            elements.postsContainer.innerHTML = '';
            posts.forEach(post => {
                const postCard = document.createElement('div');
                postCard.className = 'card-hover glass-effect bg-white/10 border border-white/20 rounded-2xl p-6 cursor-pointer hover:shadow-lg transition-all duration-300 animate-fade-in';
                postCard.innerHTML = `
                    <h3 class="text-2xl font-bold text-white mb-2">${post.title}</h3>
                    <p class="text-white/70 mb-4">${post.content.substring(0, 100)}...</p>
                    <div class="flex items-center justify-between text-sm text-white/60">
                        <div class="flex items
                            <i class="fas fa-user mr-2"></i>
                            <span>${post.author}</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-heart mr-2"></i>
                            <span>${post.likes} Likes</span>
                        </div>
                    </div>
                `;
                postCard.onclick = () => openPostModal(post.id);
                elements.postsContainer.appendChild(postCard);
            });
        }
        function renderFilterTags(categories) {
            elements.filterTags.innerHTML = '';
            const allTag = document.createElement('button');
            allTag.className = `px-4 py-2 rounded-full text-sm font-medium ${currentFilter === '' ? 'bg-purple-600 text-white' : 'bg-white/10 text-white hover:bg-white/20'} transition-all duration-300`;
            allTag.innerText = 'All';
            allTag.onclick = () => {
                currentFilter = '';
                filterAndRenderPosts();
            };
            elements.filterTags.appendChild(allTag);

            categories.forEach(category => {
                const tag = document.createElement('button');
                tag.className = `px-4 py-2 rounded-full text-sm font-medium ${currentFilter === category ? 'bg-purple-600 text-white' : 'bg-white/10 text-white hover:bg-white/20'} transition-all duration-300`;
                tag.innerText = category;
                tag.onclick = () => {
                    currentFilter = category;
                    filterAndRenderPosts();
                };
                elements.filterTags.appendChild(tag);
            });
        }
        function filterAndRenderPosts() {
            let filteredPosts = allPosts;
            if (currentSearchTerm) {
                filteredPosts = filteredPosts.filter(post => 
                    post.title.toLowerCase().includes(currentSearchTerm) ||
                    post.content.toLowerCase().includes(currentSearchTerm) ||
                    post.author.toLowerCase().includes(currentSearchTerm)
                );
            }
            if (currentFilter) {
                filteredPosts = filteredPosts.filter(post => post.category === currentFilter);
            }
            if (filteredPosts.length === 0) {
                elements.postsContainer.classList.add('hidden');
                elements.noResults.classList.remove('hidden');
            } else {
                elements.noResults.classList.add('hidden');
                elements.postsContainer.classList.remove('hidden');
                renderPosts(filteredPosts);
            }
            updateSearchStats(filteredPosts.length);
        }
        function updateSearchStats(count) {
            if (currentSearchTerm || currentFilter) {
                elements.searchStats.classList.remove('hidden');
                let statsText = `${count} post${count !== 1 ? 's' : ''} found`;
                if (currentSearchTerm) {
                    statsText += ` for "${currentSearchTerm}"`;
                }
                if (currentFilter) {
                    statsText += ` in "${currentFilter}"`;
                }
                elements.searchStats.querySelector('#searchStatsText').innerText = statsText;
                elements.clearSearch.classList.remove('hidden');
            } else {
                elements.searchStats.classList.add('hidden');
                elements.clearSearch.classList.add('hidden');
            }
        }
        async function fetchPosts() {
            try {
                const response = await fetch(`${API_BASE_URL}/posts`);
                const data = await response.json();
                allPosts = data.map(post => ({
                    ...post,
                    likes: getRandomLikes(),
                    date: getRandomDate(),
                    category: getCategoryFromContent(post.title, post.content)
                }));
                const categories = [...new Set(allPosts.map(post => post.category))];
                renderFilterTags(categories);
                filterAndRenderPosts();
            } catch (error) {
                showToast('Failed to fetch posts. Please try again later.', 'error');
            } finally {
                elements.loading.classList.add('hidden');
                elements.postsContainer.classList.remove('hidden');
            }
        }
        async function openPostModal(postId) {
            const post = allPosts.find(p => p.id === postId);
            if (!post) return;
            document.getElementById('modalTitle').innerText = post.title;
            document.getElementById('modalMeta').innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-user mr-2"></i>
                    <span>${post.author}</span>
                </div>
                <div class="flex items-center">
                    <i class="fas fa-calendar-alt mr-2"></i>
                    <span>${post.date}</span>
                </div>
                <div class="flex items-center">
                    <i class="fas fa-tag mr-2"></i>
                    <span>${post.category}</span>
                </div>
            `;
            document.getElementById('modalContent').innerText = post.content;
            document.getElementById('readingTime').innerText = calculateReadingTime(post.content);
            toggleModal(elements.modal, true);
        }
        async function createOrUpdatePost(event) {
            event.preventDefault();
            const title = document.getElementById('postTitle').value.trim();
            const author = document.getElementById('postAuthor').value.trim();
            const content = document.getElementById('postContent').value.trim();
            if (!title || !author || !content) {
                showToast('All fields are required.', 'error');
                return;
            }
            const postData = { title, author, content };
            try {
                let response;
                if (isEditMode && editingPostId) {
                    response = await fetch(`${API_BASE_URL}/posts/${editingPostId}`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(postData)
                    });
                } else {
                    response = await fetch(`${API_BASE_URL}/posts`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(postData)
                    });
                }
                if (!response.ok) throw new Error('Network response was not ok');
                const newPost = await response.json();
                newPost.likes = getRandomLikes();
                newPost.date = getRandomDate();
                newPost.category = getCategoryFromContent(newPost.title, newPost.content);
                if (isEditMode) {
                    allPosts = allPosts.map(post => post.id === editingPostId ? newPost : post);
                    showToast('Post updated successfully!', 'success');
                } else {  
                    allPosts.unshift(newPost);
                    showToast('Post created successfully!', 'success');
                }
                filterAndRenderPosts();
                resetForm();
                toggleModal(elements.formModal, false);
            } catch (error) {
                showToast('Failed to save post. Please try again.', 'error');
            }
        }
        async function deletePost() {
            if (!isEditMode || !editingPostId) return;
            if (!confirm('Are you sure you want to delete this post?')) return;
            try {
                const response = await fetch(`${API_BASE_URL}/posts/${editingPostId}`, {
                    method: 'DELETE'
                });
                if (!response.ok) throw new Error('Network response was not ok');
                allPosts = allPosts.filter(post => post.id !== editingPostId);
                filterAndRenderPosts();
                showToast('Post deleted successfully!', 'success');
                resetForm();
                toggleModal(elements.modal, false);
            } catch (error) {
                showToast('Failed to delete post. Please try again.', 'error');
            }
        }
        // Event listeners
        elements.searchInput.addEventListener('input', (e) => {
            currentSearchTerm = e.target.value.toLowerCase();
            filterAndRenderPosts();
        });
        elements.clearSearch.addEventListener('click', () => {
            elements.searchInput.value = '';
            currentSearchTerm = '';
            filterAndRenderPosts();
        });
        document.getElementById('showAllBtn').addEventListener('click', () => {
            currentSearchTerm = '';
            currentFilter = '';
            elements.searchInput.value = '';
            filterAndRenderPosts();
        });
        document.getElementById('createPostBtn').addEventListener('click', () => {
            resetForm();
            toggleModal(elements.formModal, true);
        });
        document.getElementById('closeModal').addEventListener('click', () => toggleModal(elements.modal, false));
        document.getElementById('backBtn').addEventListener(' click', () => toggleModal(elements.modal, false));
        document.getElementById('closeFormModal').addEventListener('click', () => toggleModal(elements.formModal, false));
        document.getElementById('cancelForm').addEventListener('click', () => toggleModal(elements.formModal, false));
        document.getElementById('postForm').addEventListener('submit', createOrUpdatePost);
        document.getElementById('postContent').addEventListener('input', updateCharCount);
        document.getElementById('editPostBtn').addEventListener('click', () => {
            if (!isEditMode) {
                isEditMode = true;
                const postId = allPosts.find(post => post.title === document.getElementById('modalTitle').innerText)?.id;
                if (postId) {
                    editingPostId = postId;
                    const post = allPosts.find(p => p.id === postId);
                    document.getElementById('postTitle').value = post.title;
                    document.getElementById('postAuthor').value = post.author;
                    document.getElementById('postContent').value = post.content;
                    updateCharCount();  
                    document.getElementById('formModalTitle').innerText = 'Edit Post';
                    document.getElementById('submitBtnText').innerText = 'Update Post';
                    toggleModal(elements.formModal, true);
                }
            }
        });
        document.getElementById('deletePostBtn').addEventListener('click', deletePost);
        document.getElementById('themeToggle').addEventListener('click', () => {
            document.body.classList.toggle('dark');
        });
        // Initial fetch
        fetchPosts();
    </script>
</body>
</html>

